2001-05-16  Tambet Ingo  <tambet@ximian.com>

	* user-druid.c (druid_finish): Removed password writing from here,
	it's done on the lower level.

	* passwd.c (passwd_set): Don't return anything.

	* user_settings.c (user_account_passwd_toggled): Implement.
	(user_account_passwd_random_new): Implement.
	(user_account_passwd_changed): Implement.
	(user_account_gui_new): Add more useful widgets to gui struct. Connect their signals.
	(user_account_gui_setup): Set asteriscs if password exists.
	Show password quality checkbox only if libcrack is installed.
	(user_account_gui_save): Save password if modified.

	* user_group.c (user_account_save): Set password too.
	(user_account_get_by_node): Get password.

	* passwd.c (passwd_get_random): Made it public, unified with other checks.

	* main.c (config_clists): Removed user dialog's clists from here.

	* e-table.c (tables_set_state): Renamed to (tables_update_complexity). Changed
	parameter from gboolean to XstDialogComplexity.

	* main.c (update_complexity): Hide/Show Group's tab.
	(update_notebook_complexity): Implement.

2001-05-15  Tambet Ingo  <tambet@ximian.com>

	* user_group.c (user_account_add): Removed, unified with (user_account_save).

	* user_settings.c (setup_advanced_add): Implement.
	(setup_basic_add): Implement.
	(setup_basic): Implement.
	(setup_advanced): Implement.

	* user-group-xml.c (user_set_groups): Don't modify group GSList here!

	* user_group.c (user_account_get_default): strdup profile fields to avoid memory corruption.

2001-05-14  Tambet Ingo  <tambet@ximian.com>

	* profile.c (pro_name_changed): Moved here from callbacks.c
	(pro_del_clicked): Ditto.
	(pro_ask_name): Ditto.
	(pro_prepare): Ditto.
	(pro_new_clicked): Ditto.
	(pro_copy_clicked): Ditto.
	(profile_tab_connect_signals): Implement. Add xst_dialog_modify callbacks.
	(profile_update_ui): Block those signals until we change ui programmatically.
	(profile_table_run): Implement. 

	* user-account-editor.c: New file.

	* user-account-editor.h: New file.

	* *.[ch]: Rewrote most of the user handling functions.

2001-05-11  Chema Celorio  <chema@celorio.com>

	* main.c: enable them again

2001-05-11  Chema Celorio  <chema@celorio.com>

	* main.c: disable again the profiles button for 0.4.1

2001-05-10  Chema Celorio  <chema@celorio.com>

	* main.c: enable the profiles button back
	(main): update to the new initilization method

2001-05-09  Arturo Espinosa Aldama  <arturo@ximian.com>

	* 0.4 RELEASE

2001-05-09  Chema Celorio  <chema@celorio.com>

	* main.c: disable profiles for the release casue they are not fully
	working

2001-05-08  Tambet Ingo  <tambet@ximian.com>

	* passwd.c (passwd_set): return uncrypted password (for random pwd).

	* user-druid.c (druid_finish): Made it actually save password.

	* callbacks.c (on_user_passwd_random_clicked): Fixed to use new
	set_passd (and friends) functions.
	(on_user_passwd_change_clicked): Ditto.
	(passwd_change): Ditto.

2001-05-06  Tambet Ingo  <tambet@ximian.com>

	* user-druid.c (druid_exit): Destroy dialog instead of hiding.
	(user_druid_run): Moved all the UI struc initialization here.
	Replaced xst_dialog_get_widget -> glade_xml_get_widget.

2001-05-05  Tambet Ingo  <tambet@ximian.com>

	* profile.c: Profiles have now their own XstDialog.

	* passwd.c: Reorganized code to make using it simpler.

	* user-druid.c: Finished.

	* user_group.c: check_* functions take GtkWindow argument to have parent for error dialogs.

2001-05-02  Tambet Ingo  <tambet@ximian.com>

	* user-druid.c (connect_signals): Removed random password from druid.

	* user_group.c (user_update): Removed old password stuff.

	* user-druid.c: (user_druid_pwd_new) Removed.
	(user_druid_pwd_toggled): Removed.

	* profile.c: Continued work on new profiles dialog. It's almost ready now.

2001-04-29  Tambet Ingo  <tambet@ximian.com>

	* user_group.c (user_update): Display only one error message at time.

2001-04-26  Chema Celorio  <chema@celorio.com>

	* Makefile.am: add $(srcdir) to security.in

2001-04-26  Tambet Ingo  <tambet@ximian.com>

	* Makefile.am: include new files into build.
	
	* user-druid.[ch]: New file.

	* profile.c: Adopted new UI. 

2001-04-17  Tambet Ingo  <tambet@ximian.com>

	* e-search-bar/e-dropdown-button.c: Removed compiler warning.

	* *.[ch]: Fixed tons of little bugs:
	home and shell HAVE to start with "/"
	don't allow root account modifications (login, uid, group, home, gid)
	add shell list to user_settings_dialog
	user_settings_dialog doesn't allow bigger uid's than 1000
	don't allow negative numbers for uid and gid
	add check for setting too long login (32 chars seems to be max)
	add check for setting too long groupname (16 chars seems to be max)
	add check for setting too big gid (2147483647 seems to be max)
	add check for setting too big uid (2147483647 seems to be max)
	don't allow text in uid and gid in ETable

2001-04-10  Tambet Ingo  <tambet@ximian.com>

	* user_group.c: Some fixes to make it build again.

2001-04-03  Tambet Ingo  <tambet@ximian.com>

	* user-group-xml.c: Added user_set_value* functions.

	* e-table.c: Use user-group-xml.

	* user_settings.c: ditto.

	* user-group-xml.c: New. Plan is to put all xml functions here,
	so that You don't call xst_xml functions but for example user_value_login()

	* e-table.c (user_set_value_at): Added col GID, cleaned.
	(user_value_at): Added GID.
	(group_set_value_at): Cleaned.

	* main.c (user_query_changed): Added search by uid, modified "contains gid" to
	"is gid".

	* user_group.c (user_filter): Added exact searching capability, cleaned.

2001-04-02  Tambet Ingo  <tambet@ximian.com>

	* e-table.c (table_structure_change): (and couple of helpers):
	Save ETable state and use it next time asked.

	* callbacks.c (on_showall_toggled): Save state.

	* main.c (main_window_prepare): New. Moved main dialog's init and conf
	stuff here. Added "Showall" button to xst_conf.

2001-04-01  Tambet Ingo  <tambet@ximian.com>

	* e-table.c (create_user_table): Get ETable specs and state from gonf.
	(create_group_table): ditto.
	(tables_set_state): ditto.

2001-03-30  Tambet Ingo  <tambet@ximian.com>

	* Makefile.am: Add gconf cflags.

2001-03-29  Tambet Ingo  <tambet@ximian.com>

	* main.c (quit_cb): Removed debug and other stupidity.

	* profile.c (profile_tab_prefill): Fill shells combo.
	(on_home_activate): Implement. Add "$user" to the end of path.
	(profile_save): Check entries before saving.
	(validate_var): Implement.

2001-03-28  Tambet Ingo  <tambet@ximian.com>

	* main.c (user_query_changed): Added search by group name.

	* e-table.c (user_value_group): return value not xmlNodePtr.

	* callbacks.c (user_password_change): Act by "Random password" rules.

	* profile.c (profile_tab_init): Added "Random password" toggle to profiles.

2001-03-27  Tambet Ingo  <tambet@ximian.com>

	* profile.c (save_xml): Fixed typo.

	* user_settings.c (user_settings_helper): Deleted, we don't need that anymore.

	* user_group.c (parse_group): Implement.
	(parse_home): Ditto.

	* profile.c: Added new field (group) to profiles. Also added
	  convinient aliases for home_prefix and group ($user).
	  (profile_table_add_profile): Block signal while updating combo.

	* main.c (quit_cb): Implement

	* e-table.c (destroy_tables): Implement.

	* callbacks.c (on_pro_name_changed): Update tables with new filters.
	(on_pro_save_clicked): ditto.

2001-03-26  Tambet Ingo  <tambet@ximian.com>

	* *.c: Fixed bugs: Password changing didn't work right.
	login.defs structure didn't get written.

2001-03-25  Tambet Ingo  <tambet@ximian.com>

	* callbacks.c (actions_set_sensitive): New argument (which table should be updated).
	(user_actions_set_sensitive): Removed
	(group_actions_set_sensitive): ditto.
	(net_actions_set_sensitive): ditto.

	* e-table.c: Cleanup.

2001-03-23  Tambet Ingo  <tambet@ximian.com>

	* transfer.c (transfer_gui_to_xml): Don't destroy profile_table here!

	* callbacks.c (on_pro_del_clicked): xst_dialog_modify if modified.
	(on_pro_save_clicked): ditto.
	(pro_ask_name): ditto.

	* profile.c (profile_add): Check name uniqueness before adding new.
	Cleaned interface.

	* callbacks.c (pro_ask_name): 
	(on_pro_new_clicked): 
	(on_pro_copy_clicked): Adding and copying profiles works.

2001-03-22  Tambet Ingo  <tambet@ximian.com>

	* main.c: Connect couple of signals. Profiles work
	now (with couple of bugs of course :)

	* callbacks.c (on_pro_copy_clicked): Implement.
	(on_pro_new_clicked): Implement

	* profile.c (profile_add): Implement.

	* e-table.c: Converted to use e-table-memory.

2001-03-21  Tambet Ingo  <tambet@ximian.com>

	* e-table.c (value_to_string): Fixed memory leak.

	*.[ch]: Continued work on profiles.

2001-03-20  Tambet Ingo  <tambet@ximian.com>

	* *.[ch]: Improved Profile stuff. logindefs is almost discarded (noone uses it
	anymore, but it haven't been removed. 

2001-03-19  Tambet Ingo  <tambet@ximian.com>

	* Makefile.am: Added profiles into build.
	
	* profile.[ch]: Inital work for profiles support.

	* transfer.c (transfer_xml_to_gui): init profiles.

	* user_settings.c (user_settings_prepare): Made determining if new more readable.

2001-03-16  Tambet Ingo  <tambet@ximian.com>

	* main.c: Remove user_chpasswd button (and cbs) from main window.

	* user_group.c (user_update_xml): Save password properties.

	* user_settings.c (user_settings_pwd_prepare): Implement.
	(user_settings_pwd_fill): Implement.
	(user_settings_prepare): Use new functions.

	* callbacks.c (on_user_settings_clicked): Fill in defaults for basic mode.

	* user_settings.c (user_settings_helper): Implement.

	* user_group.c (add_user_groups): Optimized.
	(adv_user_settings): go away! we don't need You!

	* user_settings.c (user_settings_group_fill): Fixed stupidity where we got wrong list (we
	wanted list of groups, got list of users).

2001-03-15  Tambet Ingo  <tambet@ximian.com>
	
	* main.c (config_clists): New func, clists_set_autosort TRUE.
		
2001-03-15  Hans Petter Jansson <hpj@ximian.com>

	* main.c (policies): Added table describing widget visibility policies.
	  (set_access_sensitivity): Removed.
	  (update_complexity): Removed all but one line.
	  (main): Added call to load policy table, removed call to
	  set_access_sensitivity ().

	* callbacks.c (user_actions_set_sensitive): Re-implemented using
	  xst_dialog_widget_set_user_sensisitve ().
	  (group_actions_set_sensitive): Ditto.
	  (net_actions_set_sensitive): Ditto.

2001-03-15  Tambet Ingo  <tambet@ximian.com>

	* e-table.c (create_extras): We don't need centering *again* :)

	* main.c (create_searchbar): GUI love.

2001-03-14  Tambet Ingo  <tambet@ximian.com>

	* Makefile.am: Added e-search-bar to build.
	
	* main.c (create_searchbar): Make e-search-bar.
	(user_query_changed): 
	(user_menu_activated): callbacks for e-search-bar.

	* user_group.c (adv_user_settings): Removed all user_settings_dialog stuff from here,
	made it use structures of widgets.
	(user_filter): New function for searching.

	* user_settings.c: New file for user_settings_dialog.

2001-03-08  Tambet Ingo  <tambet@ximian.com>

	* user_group.c: Cleaned up to remove compiler warnings.
	(user_settings_prepare): Removed all group stuff from here and put it
	(user_settings_groups): here.
	(node_exsists): Removed REALLY nasty bug.
	(user_update_xml): update user's secondary groups too.
	(del_user_groups): New function.
	(add_user_groups): New function.
	(user_settings_groups): Fixed bug what happened if  group didn't exist.

2001-03-07  Tambet Ingo  <tambet@ximian.com>

	* user_group.c (get_group_list): Optimized, made it use update_complexity.
	(get_user_list): Same here.
	*.[ch]: Continued work on new user_settings dialog, lots of cleanups also.

	* main.c (update_complexity): Hide or show new toggle.

2001-03-06  Tambet Ingo  <tambet@ximian.com>

	* user_group.c (user_settings_prepare): Set user_settings_comment_label accordingly,
	ie ("Comment:" or "Full Name:").
	(user_settings_prepare): Removed some stupidity.
	(group_fill_members_list): Code cleanup.
	(user_settings_groups): Fill user_settings_gmember and user_settings_gall.
	(my_gtk_clist_append): 
	(my_gtk_clist_append_items): Two new helper functions.

	* e-table.c (show_all): New function for user_showall toggle from GUI.
	(populate_table): Use that new function on populating tables.

2001-03-05  Tambet Ingo  <tambet@ximian.com>

	* user_group.c (get_user_groups): New function. 
	(get_group_mainusers): New function. Noone uses those yet though...

	* callbacks.c (on_group_settings_add_clicked): Now works with multiple selections.
	(on_group_settings_remove_clicked): Same here.

2001-03-02  Tambet Ingo  <tambet@ximian.com>

	* e-table.c (tables_set_state): Fixed another bug where wrong settings dialog was shown.

	* main.c: Connect new signal.

	* e-table.c: use (set_active_table) everywhere.

	* callbacks.c (on_notebook_switch_page): New function, calls (set_active_table).

	* e-table.c (set_active_table): New function.

2001-02-28  Hans Petter Jansson  <hpj@ximian.com>

	* Makefile.am: Disable control-center entry.

2001-02-28  Tambet Ingo  <tambet@ximian.com>

	* e-table.c: Justify right cells that start with slash.
		
2001-02-27  Chema Celorio  <chema@celorio.com>

	* Makefile.am (EXTRA_DIST): distcheck fixes

2001-02-27  Tambet Ingo  <tambet@ximian.com>

	* main.c (update_complexity): Moved tables flush/fill and widgets sensitivity stuff
	from here.
	Connect some more signals.
	(set_access_sensitivity): Fixed sensitivity bug in user_settings add and remove buttons.

	* e-table.c (tables_set_state): Save selected node before flush nad restore selection
	after new fill.
	(table_set_cursor_node): New function, to set selection by node.

2001-02-22  Chema Celorio  <chema@celorio.com>

	* add xst_ prefix to the xml_ functions

2001-02-22  Chema Celorio  <chema@celorio.com>

	* transfer.c (transfer_logindefs_from_xml): use xml_element_get_content
	from xml.c

2001-02-17  Chema Celorio  <chema@celorio.com>

	* main.c (main): pass NULL as options

2001-02-06  jacob berkman  <jacob@ximian.com>

	* main.c: add the signals list

2001-02-05  Tambet Ingo  <tambet@ximian.com>

	* e-table.c: Added new ETable column to user_spec.
	(user_value_at): Show group name in users' table.

	* user_group.c (get_node_by_data): New function.
	(get_group_by_data): Discarded, made other stuff use more general (get_node_by_data).

2001-02-03  Christian Meyer  <chrisime@gnome.org>

	* users.desktop.in: Added German strings.

2001-02-02  jacob berkman  <jacob@ximian.com>

	* user_group.c (adv_user_new): call the new get widget API

2001-02-02  Tambet Ingo  <tambet@ximian.com>

	* main.c (main): enable complexity in RIGHT way. The right way is the right way.

	* user_group.c (check_group_delete): get the right parent for warning dialogs.
	(check_login_delete): same.

	* *.[ch]: NIS support is in.

2001-01-31  Tambet Ingo  <tambet@ximian.com>

	* *.[ch]: Ported to use xst_* functions.

2001-01-30  Arturo Espinosa  <arturo@ximian.com>

	* user_group.c: default home dir for new users is /home/%s, not
	  home/%s.
	  (adv_user_new): set /bin/bash as the default shell.
	
2001-01-28  Arturo Espinosa  <arturo@ximian.com>

	* e-table.h: use blue as COLOR_NORMAL.
	
2001-01-28  Tambet Ingo  <tambet@ximian.com>

	* e-table.c: Better readable column names.
	(create_extras): Added color column.
	(get_row_color): Function to get right color.

	* user_group.c (get_corresp_field): Now gets only field, no min & max anymore.
	(get_min_max): New function.
	Fixed all functions using get_corresp_field.

2001-01-27  Tambet Ingo  <tambet@ximian.com>

	* e-table.c: included e-cell-text.h I forgot before.

	* user_group.c (check_user_home): Now checks if home dir != empty
	(user_update_xml): Fill in defaults for home and shell if ! advanced mode.

2001-01-23  Tambet Ingo  <tambet@ximian.com>

	* e-table.c: all e-table cells are centered from now on. I'm not exactly
	sure it looks better now, but at least it's unified with other tools.
	(create_extras): make that new cell.

2001-01-22  Tambet Ingo  <tambet@ximian.com>

	* e-table.c (group_set_value_at): now checks whether name and gid are valid.
	(user_set_value_at): checks all cols before settings.

	* user_group.c (check_group_gid): new function.
	(check_user_shell): new blank function.
	(check_user_home): new blank function.

2001-01-19  Tambet Ingo  <tambet@ximian.com>

	* callbacks.c: Added empty functions (on_network_delete_clicked),
	  (on_network_settings_clicked), (on_network_user_new_clicked),
          (on_network_group_new_clicked) to sush users-admin at runtime.

2001-01-19  Tambet Ingo  <tambet@ximian.com>

	* network.[ch]: new version.
	* e-table.[ch]: new version.
	* callbacks.[ch]: new version.
	* user_group.[ch]: new version.

2001-01-19  Tambet Ingo  <tambet@ximian.com>

	* network.[ch]: deleted.
	* e-table.[ch]: deleted.
	* callbacks.[ch]: deleted.
	* user_group.[ch]: deleted.

2001-01-16  Chema Celorio  <chema@celorio.com>

	* main.c (main): call transfer_logindefs_from_xml before creating
	the e-table because the e-table uses the logindefs to know which users
	to display. This was causing a bug in which only one user would be
	displayed.

	* transfer.c (transfer_logindefs_from_xml): make non-static
	* transfer.h (transfer_logindefs_from_xml): add to header
	* transfer.c (transfer_xml_to_gui): and remove from here.
	We only load the logindefs once.
	
2001-01-15  Chema Celorio  <chema@celorio.com>

	* Start ChangeLog

