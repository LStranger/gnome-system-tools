2001-04-17  Hans Petter Jansson  <hpj@ximian.com>

	* xst-dialog.c (xst_dialog_freeze): Desensitize dialog when frozen.
	  (xst_dialog_thaw): Conversely.

	* xst-tool.c: Removed all progress information from report window.
	  Freeze/thaw around load and save operations.

2001-04-17  Arturo Espinosa Aldama  <arturo@ximian.com>

	* xst-report-line.c (xst_report_format_from_key): when warning about
	  a missing key, show the actual key. This warning should disappear
	  shortly.

2001-04-16  Tambet Ingo  <tambet@ximian.com>

	* xst-conf.c: Documented all public functions.

2001-04-11  Tambet Ingo  <tambet@ximian.com>

	* xst-conf.c: Converted from GConf to gnome-config. No changes needed
	in frontends.

2001-04-04  Hans Petter Jansson  <hpj@ximian.com>

	* xst-ui.[ch] (get_list_item_by_name): Moved out of
	  xst_ui_list_get_list_item_by_name ().
		(xst_ui_list_get_list_item_by_name): Use get_list_item_by_name ().
		(xst_ui_option_menu_get_selected_row): Implement. Returns index of
		selected item in a GtkOptionMenu. Uses get_list_item_by_name ().

2001-04-03  Hans Petter Jansson  <hpj@ximian.com>

	* xst-dialog.h: Fixed proto for xst_dialog_add_apply_hook ().

2001-04-03  Arturo Espinosa Aldama  <arturo@ximian.com>

	* xst-dialog.c (xst_dialog_add_apply_hook): oops. We want a function
	pointer, not a pointer to pointer.

2001-04-02  Hans Petter Jansson  <hpj@ximian.com>

	* xst-dialog.[ch] (xst_dialog_set_widget_user_modes): Implement. Sets user
	  widget modes from table.

2001-04-02  Hans Petter Jansson  <hpj@ximian.com>

	* xst-widget.[ch] (xst_widget_set_user_mode): Implement.
	  (xst_widget_set_user_sensitive): Uses former, kept for compat.
		(xst_widget_apply_policy): Changed to honour full-fledged user modes.

	* xst-dialog.c (xst_dialog_widget_set_user_mode): New shortcut func.
	  (xst_dialog_widget_set_user_sensitive): Obsoleted, kept for compat.

2001-03-31  Tambet Ingo  <tambet@ximian.com>

	* xst-dialog.c (xst_dialog_set_complexity): Use common functions.
	(xst_dialog_construct): ditto.

	* xst-conf.c: New.

	* xst-conf.h: New.

2001-03-30  Tambet Ingo  <tambet@ximian.com>

	* Makefile.am: Add gconf cflags.
	
	* xst-dialog.c (xst_dialog_construct): Set initial complexity right.
	(xst_dialog_set_complexity): Save complexity.

	* xst-tool.c (xst_tool_construct): construct GConfClient,
	  add client directory if needed.
	  (xst_tool_init): gconf_init ()

	* xst-types.h: Added XST_DIALOG_NONE to XstDialogComplexity
	  to notify errors.

	* xst-tool.h: Added GConfClient to XstTool.

2001-03-30  Arturo Espinosa Aldama  <arturo@ximian.com>

	* xst-report-line.c (xst_report_hash_eq): equivalence function.
	(xst_report_hash_func): hashing function.
	(xst_report_hash_init): init hash with report.pl.in keys and
	translatable strings. Gotta love query-replace-regexp.
	(xst_report_format_from_key): return translatable string from
	parsed key.
	(xst_report_sprintf): helper function, for a lack of a more
	expressive language.
	(xst_report_line_new): use new scheme to allow translatable strings.
	(xst_report_line_new_from_string): parsing changed. Separator is
	now "::".

2001-03-28  Arturo Espinosa Aldama  <arturo@ximian.com>

	* xst-tool.c: common_report_hooks: gchar *keys in hook entry
	  declarations. More code passing from ids to keys.

	* xst-report-line.c: Use gchar *keys instead of gint ids.

	* xst-report-hook.c: Use gchar *keys instead of gint ids.

2001-03-27  Tambet Ingo  <tambet@ximian.com>

	* xst-tool.c (xst_tool_destroy): gtk_main_quit here.
	(xst_tool_set_close_func): Now we can add cleanup/gui-save functions
	on tool exit.

	* xst-dialog.c (dialog_close): Don't quit here, just destroy the dialog
	  and emit "destroy" for tool.

	* xst-tool.c (xst_tool_destroy): The right arg for it is GtkObject.

2001-03-21  Arturo Espinosa Aldama  <arturo@ximian.com>

	* xst-ui.c (xst_ui_create_image_widget): stolen from evolution's
	  e-util/e-gui-utils.c, creates an aa canvas with a gdk_pixbuf
	  item inside. Called from libglade: don't use this by hand: just
	  add GnomePixmaps in the glade files and they'll be replaced
	  by Custom widgets created by calling this function.

2001-03-21  Tambet Ingo  <tambet@ximian.com>

	* global.h: Added xst-ui.h

	* xst-ui.h: Added "#ifndef XST_UI_H" and friends.

	* Makefile.am: Add those two suckers to build.
	
	* xst-ui.c (xst_ui_list_get_list_item_by_name): Does what it says.
	(xst_ui_combo_remove_by_label): Ditto. I can't believe there isn't gtk_ functions for that.

	* xst-ui.h: New file for gtk helpers.

	* xst-ui.c: ditto.

2001-03-15  Hans Petter Jansson  <hpj@ximian.com>

	* xst-dialog.[ch] (xst_dialog_get_xst_widget): Implement. Gets a
	  GtkWidget wrapped in XstWidget struct.
	  (xst_dialog_widget_set_user_sensitive): Implement. Sets requested
	  sensitivity for a named (and loaded) XstWidget.

2001-03-15  Hans Petter Jansson  <hpj@ximian.com>

	* xst-dialog.[ch] (xst_dialog_set_widget_policies): Correct the
	  array referencing.

	* global.h: Add includes of xst-widget.h and xst-types.h.

2001-03-15  Hans Petter Jansson  <hpj@ximian.com>

	* xst-dialog.c (xst_dialog_set_complexity): Sync complexity string
	  array with the number of levels now available (2).

2001-03-15  Hans Petter Jansson  <hpj@ximian.com>

	* xst-widget.[ch]: Implement. Wrapper for XST-managed widgets; lets
	  us update widget visibility and sensitivity according to defined
	  policies. Policy includes complexity level, root access and a
	  user-controlled sensitivity (e.g. for buttons that become sensitive
	  when you select from a list).

	* xst-dialog.[ch] (xst_dialog_set_widget_policies): Re-implement.
	  Lets you define widget policies in an array and pass that to the
	  dialog. Now converts the array into a GSList.
	  (apply_widget_policies): Don't do the work here anymore, call
	  xst_widget_apply_policy() on each XstWidget instead.

	* xst-types.[ch]: Remove XST_DIALOG_INTERMEDIATE. Move
	  XstWidgetPolicy struct to xst-widget.h. Add XstWidget typedef.

	* Makefile.am: Add xst-widget.[ch].

2001-03-15  Hans Petter Jansson  <hpj@ximian.com>

	* xst-dialog.c (apply_widget_policies): Implement.
	  (xst_dialog_set_complexity): Call apply_widget_policies().
	  (xst_dialog_set_widget_policies): Implement.

	* xst-dialog.h: Add widget_policies to XstDialog struct.
	  Add xst_dialog_set_widget_policies().

	* xst-types.h: #include <glib.h>.
	  Add XstWidgetMode enum.
	  Add XstWidgetPolicy struct.

2001-03-08  Tambet Ingo  <tambet@ximian.com>

	* xst-xml.c (xst_xml_element_find_first): Added additional checks.
	(xst_xml_element_find_next): same here.

2001-03-05  Arturo Espinosa Aldama  <arturo@ximian.com>

	* xst-dialog.h: Structures and types for apply hooks.

	* xst-dialog.c (xst_dialog_add_apply_hook): Add functions that for checking
	  info before calling apply signals.
	  (apply_cb):  If any of these hooks return false, don't emit signals.
	  

2001-03-01  Arturo Espinosa Aldama  <arturo@ximian.com>

	* xst-dialog.c (dialog_close): general function.
	(close_cb): use dialog_close.
	(dialog_delete_event_cb): delete_event handler.
	(xst_dialog_construct): connect delete_event.

2001-02-28  Hans Petter Jansson  <hpj@ximian.com>

	* Makefile.am: Disable control-center entry.

2001-02-27  Chema Celorio  <chema@celorio.com>

	* Makefile.am (EXTRA_DIST): distcheck fixes

2001-02-26  Arturo Espinosa Aldama  <arturo@ximian.com>

	* xst-tool.c (xst_tool_load_try): Split xst_main tasks, so I can use
	  this code on the ppp druid.

2001-02-25  Hans Petter Jansson  <hpj@ximian.com>

	* xst-tool.c (platform_unknown_cb): Remove.
	  (report_dispatch): Rename from report_dispatch_lines (). Modify
	  to work without nested main loops.
	  (platform_list_unselect_row_cb): Implment.
	  (platform_unsupported_clicked_cb): Implement.
	  (platform_unsupported_cb): Modify to work without nested main loops.
	  Now handles unknown platforms too.
	  (report_progress): Put input_id in tool context.
	  (report_progress_tick): Modify to work without nested main loops.

	* xst-tool.h: Add input_id to XstTool context.

2001-02-23  Hans Petter Jansson  <hpj@ximian.com>

	* xst-tool.c (platform_list_select_row_cb): Make Ok button sensitive
	  when selection made. Take tool context as argument.
	  (platform_unsupported_cb): Set button insensitive. Fix arguments to
	  platform_list_select_row_cb.
	  (report_progress_tick): Handle zero-length read as broken pipe.
	  (xst_tool_load): Don't abort when no document received. Instead,
	  return an error value so informative dialog is shown.

	* xst-tool.h: Add context for platform selection.

2001-02-22  Hans Petter Jansson  <hpj@ximian.com>

	* xst-tool.c (platform_unsupported_cb): Plug the other memleak.

2001-02-22  Chema Celorio  <chema@celorio.com>

	* xst-xml.h: copy from xml.h
	* xst-xml.c: ditto

	* Makefile.am (libsetuptool_a_SOURCES): replace xml.[ch]
	with xst_xml.[ch]

	* xst-tool.c (report_dispatch_lines): plug a memleak

2001-02-22  Hans Petter Jansson  <hpj@ximian.com>

	* xst-dialog.c (close_cb): Fix typo.

2001-02-22  Hans Petter Jansson  <hpj@ximian.com>

	* xst-tool.c, xst-tool.h: Implement dialog for overriding the
	  detected platform, in case it's not supported. Also, the chosen
	  platform is stored for reference (used on --set). Note that this
	  still sort of sucks, but it works for now.

	* xst-platform.c, xst-platform.h (xst_platform_dup): Implement.

2001-02-22  Chema Celorio  <chema@celorio.com>

	* xml.c (xst_xml_unquote): remove this function. Duh !

2001-02-22  Hans Petter Jansson  <hpj@ximian.com>

	* xst-tool.c (report_clear_lines): Implement.
	  (report_dispatch_lines): It's tool, not took.
	  (xst_tool_clear_supported_platforms): Set list ptr to NULL.
	  (report_progress): Init report system properly, so that multiple
	  invocations will work.

2001-02-22  Chema Celorio  <chema@celorio.com>

	* xml.c (xst_xml_unquote): implement
	(xml_element_get_content): user here

2001-02-21  Arturo Espinosa  <arturo@ximian.com>

	* xst-dialog.c: handle delete_event. An assignment from incompatible
	  pointer type warning cleared.

2001-02-21  Chema Celorio  <chema@celorio.com>

	* xst-tool.c (report_dispatch_lines): when a backend malfunctions
	don't recurse here.

2001-02-17  Chema Celorio  <chema@celorio.com>

	* xst-tool.h: update the header for tool_init

	* xst-tool.c (xst_tool_init): add a parameter to let each front end add
	command line options. We are going to have to merge the options with the
	ones that are going to be available on all front ends.
	

2001-02-16  Hans Petter Jansson  <hpj@ximian.com>

	* xst-platform.[ch]: Implement.

	* xst-report-hook.[ch]: XstReportHookFunc now takes an
	  XstReportLine, not id and message.

	* xst-tool.[ch]: XstReportHookFunc funcs changed to take
	  XstReportLine. Implemented xst_tool_add_supported_platform (),
	  xst_tool_clear_supported_platforms (), platform_add_supported_cb (),
	  platform_set_current_cb (). We now build lists of supported
	  distros, and store the currently assumed distro.

	* xst-types.h: Add XstPlatform.

	* Makefile.am: Add xst-platform.[ch].

2001-02-16  Hans Petter Jansson  <hpj@ximian.com>

	* xst-tool.[ch]: Added callbacks for distro-related fatal
	  conditions. Added report line queuing.

	* xst-report-line.c: Fixed string splitting and added a check.

2001-02-13  Hans Petter Jansson  <hpj@ximian.com>

	* xst-report-line.[ch]: Implement.

	* xst-types.h: Add XstReportLine.

	* Makefile.am: Add xst-report-line.[ch].

2001-02-09  Tambet Ingo  <tambet@ximian.com>

	* xml.c (xml_set_child_content): If there's no child, then add it.

2001-02-09  Hans Petter Jansson  <hpj@ximian.com>

	* xst-report-hook.[ch]: Implement. This is the framework that
	  allows tools to react to report messages.

	* xst-tool.[ch]: Add report hook functions to XstTool. Add a
	  skeleton table for common hooks.

	* xst-types.h: Add types needed for XstReportHook.

	* Makefile.am: Add xst-report-hook.[ch] to build.

2001-02-06  jacob berkman  <jacob@ximian.com>

	* xst-dialog.[ch]: add a _connect_signals() function
	which... connects the glade signals.  Also, add the " - Ximian
	Setup Tools" to the title of the windows here instead of in each
	tool

2001-02-03  Christian Meyer  <chrisime@gnome.org>

	* System.directory.in: Added German strings.

2001-02-02  jacob berkman  <jacob@ximian.com>

	* tool.[ch]: into the Attic with you

	* helpers.c: remove inclusion of old tool.h

	* global.h: 
	* Makefile.am: remove tool.[ch]

2001-01-18 Chema Celorio   <chema@celorio.com>

	* tool.c (report_progress): Set the timeout to half of what it was
	before.
	(handle_events_immediately): retur the usleep to what it was
	before. 

2001-01-29  jacob berkman  <jacob@ximian.com>

	* Makefile.am: * global.h: include the old tool.[ch] until all
	tools are ported to the new ones

	* xst-tool.[ch]:
	* xst-dialog.[ch]: near complete implementation.  Time tool now
	uses the these

2001-01-26  jacob berkman  <jacob@ximian.com>

	* xst-tool.[ch]:
	* xst-dialog.[ch]: they compile now

	* gnomesupport.h: this shouldn't be here

2001-01-25  jacob berkman  <jacob@ximian.com>

	* xst-tool.[ch]: 
	* xst-types.h:
	* xst-dialog.h: refactoring of tool.[ch]

2001-01-18  Chema Celorio  <chema@celorio.com>

	* xml.h: remove headers

	* xml.c (xml_doc_read_from_backend): remove, it was not beeing
	used and was duplicated with common/tool.c#tool_config_load
	(xml_doc_write_to_backend): ditto
	(get_backend_path): remove, not beeing used. Why was it inside xml.c ?

2001-01-17  Tambet Ingo  <tambet@ximian.com>

	* Changelog: Clean up my mess.

	* xml.c: (xml_set_child_content) New function.

2001-01-16  Tambet Ingo  <tambet@ximian.com>

	* xml.c: (xml_get_child_content) New function.

	* tool.c (tool_interface_load) removed #warning and added dialog to
	  notify users about error.

2001-01-15  Chema Celorio  <chema@celorio.com>

	*  Start ChangeLog

